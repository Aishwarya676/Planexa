<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to Planexa | Onboarding</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
        }

        .slide-fade-enter {
            opacity: 0;
            transform: translateY(10px);
        }

        .slide-fade-active {
            opacity: 1;
            transform: translateY(0);
            transition: all 0.4s ease;
        }
    </style>
</head>

<body class="bg-slate-950 text-white min-h-screen flex items-center justify-center p-6 overflow-hidden">

    <div id="onboarding-container" class="w-full max-w-4xl flex flex-col items-center">
        <!-- Close/Skip Button -->
        <button onclick="finishOnboarding()"
            class="absolute top-10 right-10 text-slate-400 hover:text-white transition-colors font-bold text-sm tracking-widest uppercase">Skip
            Tour</button>

        <div id="slide-content"
            class="w-full bg-slate-900 border border-slate-800 rounded-[3rem] p-10 md:p-16 flex flex-col items-center text-center shadow-2xl relative">

            <div id="icon-container"
                class="w-24 h-24 bg-indigo-500/10 rounded-[2rem] flex items-center justify-center mb-10 text-indigo-400 border border-indigo-500/20">
                <i id="slide-icon" data-lucide="rocket" class="w-12 h-12"></i>
            </div>

            <h1 id="slide-title" class="text-4xl md:text-5xl font-extrabold mb-6 tracking-tight leading-tight"></h1>
            <p id="slide-description" class="text-xl text-slate-400 leading-relaxed mb-12 max-w-2xl min-h-[100px]"></p>

            <div id="dots-container" class="flex gap-3 mb-12"></div>

            <div class="flex items-center justify-between w-full">
                <button id="prev-btn" onclick="prevSlide()"
                    class="px-8 py-4 text-slate-500 font-bold hover:text-slate-300 transition-all opacity-0 pointer-events-none flex items-center gap-2 group">
                    <i data-lucide="chevron-left" class="w-5 h-5 group-hover:-translate-x-1 transition-transform"></i>
                    Back
                </button>
                <button id="next-btn" onclick="nextSlide()"
                    class="px-12 py-5 bg-indigo-600 text-white font-black rounded-2xl shadow-xl shadow-indigo-900/20 hover:bg-indigo-500 hover:-translate-y-1 transition-all flex items-center gap-3">
                    <span id="next-text">Next</span> <i id="next-icon" data-lucide="arrow-right" class="w-6 h-6"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        const slides = [
            {
                title: "Welcome to Planexa!",
                description: "Your comprehensive ecosystem for peak productivity and professional growth. Planexa merges advanced organization tools with a world-class coaching platform to help you transcend your daily limits.",
                icon: "rocket"
            },
            {
                title: "The Ultimate Unified Planner",
                description: "Experience the power of 5 specialized modules in one view. Effortlessly manage <strong>To-Dos</strong> for immediate tasks, <strong>Shopping Lists</strong> for essentials, <strong>Reminders</strong> for time-sensitive needs, <strong>Goals</strong> for long-term vision, and <strong>Events</strong> for your social calendar.",
                icon: "calendar"
            },
            {
                title: "Precision Organization",
                description: "Every module is designed for clarity and focus. Use our priority system to differentiate between <i>urgent</i> and <i>important</i> tasks, ensuring you're always working on what truly matters for your success.",
                icon: "layout"
            },
            {
                title: "Expert Coaching at Your Fingertips",
                description: "Unlock your full potential with our Integrated Coaching Platform. Browse detailed profiles of <strong>Expert Coaches</strong> across various domains, read premium <strong>insightful articles</strong>, and book 1-on-1 <strong>personalized sessions</strong> tailored to your specific growth needs.",
                icon: "users"
            },
            {
                title: "Empower Your Growth",
                description: "Planexa isn't just about checklists; it's about evolution. Follow personalized coaching tracks, synchronize your schedule across devices, and utilize our privacy-focused environment to build your best self.",
                icon: "trending-up"
            },
            {
                title: "You're Ready to Excel!",
                description: "Your journey towards peak productivity starts now. Head over to your dashboard, customize your theme, and witness how Planexa transforms your workflow into a masterpiece of organization.",
                icon: "check-circle"
            }
        ];

        let currentSlide = 0;

        function updateSlide() {
            const slide = slides[currentSlide];
            const titleEl = document.getElementById('slide-title');
            const descEl = document.getElementById('slide-description');
            const iconEl = document.getElementById('slide-icon');
            const nextText = document.getElementById('next-text');
            const nextBtn = document.getElementById('next-btn');
            const nextIcon = document.getElementById('next-icon');
            const prevBtn = document.getElementById('prev-btn');

            // Set Content
            titleEl.textContent = slide.title;
            descEl.innerHTML = slide.description;
            iconEl.setAttribute('data-lucide', slide.icon);

            // Update Icon
            if (window.lucide) window.lucide.createIcons();

            // Dots
            const dotsContainer = document.getElementById('dots-container');
            dotsContainer.innerHTML = slides.map((_, i) =>
                `<div class="h-1.5 rounded-full transition-all duration-500 ${i === currentSlide ? 'bg-indigo-500 w-10' : 'bg-slate-700 w-3'}"></div>`
            ).join('');

            // Buttons
            prevBtn.style.opacity = currentSlide > 0 ? '1' : '0';
            prevBtn.style.pointerEvents = currentSlide > 0 ? 'auto' : 'none';

            if (currentSlide === slides.length - 1) {
                nextText.textContent = "Get Started";
                nextBtn.classList.replace('bg-indigo-600', 'bg-emerald-600');
                nextIcon.setAttribute('data-lucide', 'check');
            } else {
                nextText.textContent = "Next";
                nextBtn.classList.replace('bg-emerald-600', 'bg-indigo-600');
                nextIcon.setAttribute('data-lucide', 'arrow-right');
            }
            if (window.lucide) window.lucide.createIcons();
        }

        function nextSlide() {
            if (currentSlide < slides.length - 1) {
                currentSlide++;
                updateSlide();
            } else {
                finishOnboarding();
            }
        }

        function prevSlide() {
            if (currentSlide > 0) {
                currentSlide--;
                updateSlide();
            }
        }

        async function finishOnboarding() {
            try {
                await fetch('/api/user/complete-onboarding', { method: 'POST', credentials: 'include' });
                window.location.replace('/app.html');
            } catch (err) {
                console.error("Failed to complete onboarding:", err);
                window.location.replace('/app.html');
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateSlide();
            if (window.lucide) window.lucide.createIcons();
        });
    </script>
</body>

</html>